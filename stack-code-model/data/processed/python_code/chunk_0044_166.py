package com.lia.motion {	import flash.display.DisplayObject;	import flash.display.Sprite;	import flash.events.Event;	import flash.geom.Rectangle;	/**	 * @author shanem	 */	public class Bouncey {		private var frame : Sprite = new Sprite();		public var items : Array = [];		public function Bouncey() {			start();		}		public function get length() : int {			return items.length;		}		public function add(item : Object, area : Rectangle, gravity : Number = 3, mass : Number = 0, vx : Number = 0, vy : Number = 0, friction : Number = 1) : void {			var bi : BounceItem = new BounceItem();			bi.item = item;			bi.area = area;			bi.gravity = gravity;			bi.mass = mass;			bi.vx = vx;			bi.vy = vy;			bi.friction = friction;						items.unshift(bi);		}		public function remove(item : Object) : Boolean {			var len : int = items.length;						for(var i : int = 0;i < len;i++) {				if(BounceItem(items[i]).item == item) {					items.splice(i, 1);					return true;				}			}						return false;		}		public function empty() : void {			items = [];		}		public function start() : void {			frame.addEventListener(Event.ENTER_FRAME, draw, false, 0, true);		}		public function stop() : void {			frame.removeEventListener(Event.ENTER_FRAME, draw);		}		private function draw(e : Event) : void {			var len : int = items.length, bi : BounceItem, item : DisplayObject;						for(var i : int = 0;i < len;i++) {				bi = items[i];				item = bi.item as DisplayObject;								bi.vy += bi.gravity + bi.mass;								item.x += bi.vx;				item.y += bi.vy;							if(item.x <= bi.area.left) {					item.x = bi.area.left;					bi.vx = -bi.vx * bi.friction;				} else if(item.x >= bi.area.right) {					item.x = bi.area.right;					bi.vx = -bi.vx * bi.friction;				}							if(item.y <= bi.area.top) {					item.y = bi.area.top;					bi.vy = -bi.vy * bi.friction;					bi.vx *= bi.friction;				} else if(item.y >= bi.area.bottom) {					item.y = bi.area.bottom;					bi.vy = -bi.vy * bi.friction;					bi.vx *= bi.friction;				}			}		}	}}import flash.geom.Rectangle;internal class BounceItem {	public var item : Object;	public var gravity : Number;	public var mass : Number;	public var vx : Number = 0;	public var vy : Number = 0;	public var friction : Number = 0.9;	public var area : Rectangle;}