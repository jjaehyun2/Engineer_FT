package {	import flash.display.Bitmap;	import flash.display.BitmapData;	import flash.display.BitmapDataChannel;	import flash.display.BlendMode;	import flash.display.Sprite;	import flash.display.StageQuality;	import flash.events.Event;	import flash.filters.BlurFilter;	import flash.filters.DisplacementMapFilter;	import flash.geom.ColorTransform;	import flash.utils.getDefinitionByName;		import com.flashdynamix.motion.TweensyGroup;	import com.flashdynamix.motion.effects.BulgeEffect;	import com.flashdynamix.motion.effects.core.*;	import com.flashdynamix.motion.extras.BitmapTiler;	import com.flashdynamix.motion.layers.BitmapLayer;	import com.flashdynamix.utils.SWFProfiler;		/**	 * @author shanem	 */	public class BulgeFX extends Sprite {		private var layer : BitmapLayer;		private var tween : TweensyGroup;		private var tiler : BitmapTiler;		public function BulgeFX() {						SWFProfiler.init(this);						stage.quality = StageQuality.LOW;						var TextureBmd : Class = getDefinitionByName("EggShell") as Class;			var MaskItem : Class = getDefinitionByName("MaskItem") as Class;			var ShadowItem : Class = getDefinitionByName("ShadowItem") as Class;						tiler = new BitmapTiler(new TextureBmd(200, 200), 250, 314);			tween = new TweensyGroup(false, true);						var maskItem : BitmapData = new MaskItem(0, 0);			var bulgeItem : BitmapData = new MaskItem(0, 0);						var bf : BlurFilter = new BlurFilter(3, 0, 2);						layer = new BitmapLayer(maskItem.width, maskItem.height);			var bulge : BulgeEffect = new BulgeEffect(bulgeItem, false, 80, 80);			layer.draw(tiler);			layer.add(bulge);			layer.draw(new ShadowItem(0, 0), null, null, new ColorTransform(1, 1, 1, 0.5), BlendMode.DARKEN);			layer.add(new FilterEffect(bf));			layer.add(new ChannelEffect(maskItem, BitmapDataChannel.ALPHA, BitmapDataChannel.ALPHA));			addChild(layer);						layer.x = 125;			layer.y = 100;						var filter : DisplacementMapFilter = DisplacementMapFilter(bulge.filter);						this.addEventListener(Event.ENTER_FRAME, draw);						/*var bmp : Bitmap = new Bitmap(filter.mapBitmap);			bmp.x = 250;			addChild(bmp);*/						tiler.offsetY -= 20;		}		private function draw(e : Event) : void {			tiler.offsetX += 2;			//tiler.offsetY += 1;		}	}}