package {	import flash.filters.*;	import fl.motion.Color;  	import flash.display.MovieClip;	import flash.events.Event;	import flash.filters.BevelFilter; 	import com.greensock.*;	import com.greensock.plugins.*;	import com.greensock.TweenLite;	import com.greensock.plugins.BlurFilterPlugin;	import com.greensock.plugins.TweenPlugin;	TweenPlugin.activate([BlurFilterPlugin]);	TweenPlugin.activate([TintPlugin]);	import flash.display.Loader;	import flash.net.URLRequest;	import flash.net.navigateToURL;	import flash.external.ExternalInterface;	import com.greensock.easing.Linear;	import com.greensock.easing.Cubic;	import com.greensock.easing.Back;	import com.greensock.easing.Sine;	import flash.events.MouseEvent;	import flash.utils.Timer;	import flash.events.TimerEvent;		public class Parent extends MovieClip	{		private var ldr:Loader;		//use this variable to access the child swf		private var _child:MovieClip;		var mySwatchColor1:Color  = new Color();			var mySwatchColor2:Color  = new Color();			var mySwatchColor3:Color  = new Color();			var mySwatchColor4:Color  = new Color();  			var myShoeColor1:Color  = new Color();			var myShoeColor2:Color  = new Color();			var myShoeColor3:Color  = new Color();			var myShoeColor4:Color  = new Color();		var clickTag:String = "";		private var childURL:String = "Nike_AirMaxPlus2013_300x250_child.swf";		public function Parent()		{			setup();		}		private function setup():void		{			load_child();		}		//load child swf		private function load_child():void		{			ldr = new Loader();			_child = new MovieClip();			this.addChild(_child);			var req:URLRequest = new URLRequest(childURL);			ldr.load(req);			ldr.contentLoaderInfo.addEventListener(Event.COMPLETE, onLoaderComplete);		}				//once child is loaded make it clickable and accessible through the _child MovieClip;		private function onLoaderComplete(event:Event):void		{			ldr.contentLoaderInfo.removeEventListener(Event.COMPLETE, onLoaderComplete);			_childContainer.addChild(ldr);			_child = MovieClip(ldr.content);			this.setupStage();		}				private function setupStage():void		{			_child.shoe1.shoes.gotoAndStop(1);			_child.shoe2.shoes.gotoAndStop(2);			_child.shoe3.shoes.gotoAndStop(3);			_child.shoe4.shoes.gotoAndStop(4);			_child.shoe1.rotation=20;			_child.shoe2.rotation=20;			_child.shoe3.rotation=20;			_child.shoe4.rotation=20;			_child.shoe1.scaleX=.67;			_child.shoe2.scaleX=.67;			_child.shoe3.scaleX=.67;			_child.shoe4.scaleX=.8;			_child.shoe1.scaleY=.67;			_child.shoe2.scaleY=.67;			_child.shoe3.scaleY=.67;			_child.shoe4.scaleY=.8;			_child.shoe1.x=350;			_child.shoe2.x=350;			_child.shoe3.x=350;			_child.shoe4.x=350;			_child.shoe1.y=50;			_child.shoe2.y=50;			_child.shoe3.y=50;			_child.shoe4.y=50;						_child.copy1.x=300;			_child.copy2.x=300;			_child.copy3.x=300;			_child.copy1.y=66;			_child.copy2.y=98;			_child.copy3.y=129;			_child.copy1.alpha=0;			_child.copy2.alpha=0;			_child.copy3.alpha=0;						_child.copy4.x=300;			_child.copy4.y=192;			_child.copy4.alpha=0;						_child.cta.x=350;			_child.cta.y=220;			_child.cta.alpha=0;						_child.colorSwatches.x=300;			_child.colorSwatches.y=220;			_child.colorSwatches.alpha=0;						_child.btn_expand.x=300;			_child.btn_expand.y=220;			_child.btn_expand.alpha=0;						_child.pagesAnimation.alpha=0;			  			mySwatchColor1.setTint(0xd8d84a, 1);  			mySwatchColor2.setTint(0x184273, 1); 			mySwatchColor3.setTint(0x020202, 1);  			mySwatchColor4.setTint(0xbd2217, 1);			myShoeColor1.setTint(0xd8d84a, .5);  			myShoeColor2.setTint(0x184273, .5); 			myShoeColor3.setTint(0x020202, .5);  			myShoeColor4.setTint(0xbd2217, .5);			_child.colorSwatches.color1.transform.colorTransform = mySwatchColor1;			_child.colorSwatches.color2.transform.colorTransform = mySwatchColor2;			_child.colorSwatches.color3.transform.colorTransform = mySwatchColor3;			_child.colorSwatches.color4.transform.colorTransform = mySwatchColor4;			//_child.shoe1.shoes.airbag.transform.colorTransform = myShoeColor1;			_child.colorSwatches.white1.alpha=0;			_child.colorSwatches.white2.alpha=0;			_child.colorSwatches.white3.alpha=0;			_child.colorSwatches.white4.alpha=0;						// Create the bevel filter and set filter properties. 			var bevel:BevelFilter = new BevelFilter();  			bevel.distance = .2; 			bevel.angle = 45; 			bevel.highlightColor = 0xFFFFFF; 			bevel.highlightAlpha = 1; 			bevel.shadowColor = 0x000000; 			bevel.shadowAlpha = 1; 			bevel.blurX = 2; 			bevel.blurY = 2; 			bevel.strength = 10; 			bevel.knockout = false; 			// Apply filter to the image. 			_child.colorSwatches.color1.filters = [bevel];			_child.colorSwatches.color2.filters = [bevel];			_child.colorSwatches.color3.filters = [bevel];			_child.colorSwatches.color4.filters = [bevel];						btn.addEventListener(MouseEvent.CLICK, onClick);						this.animateShoe1();			//this.copyAnimationIn();			//this.endFrameResolve();		}		private function animateShoe1():void {			_child.shoeAnimation.gotoAndPlay(1);			_child.shoeAnimation.shoe.gotoAndPlay(1);			_child.pagesAnimation.gotoAndPlay(1);			//TweenLite.to(timerMC, .1,{alpha:0,onComplete:animateShoe2,delay:2});			TweenLite.to(_child.pagesAnimation, .5,{alpha:1,tint:0xd8d84a,ease:Cubic.easeInOut});			TweenLite.to(timerMC, 0,{alpha:1,onComplete:animateShoe2,delay:2.5});		}				private function animateShoe2():void {				var myColor:Color  = new Color();  				var myColor2:Color  = new Color(); 				myColor.setTint(0x3483b5, .75);  				myColor2.setTint(0x3483b5, .75);				//_child.pagesAnimation.transform.colorTransform = myColor;				//_child.shoeAnimation.shoe.shoeLightBeams.transform.colorTransform = myColor2;			TweenLite.to(_child.pagesAnimation, .5,{tint:0x3287eb,ease:Cubic.easeInOut});			//_child.pagesAnimation.alpha=1;			_child.shoeAnimation.shoe.shoes.gotoAndStop(2);						_child.shoeAnimation.gotoAndPlay(1);			_child.shoeAnimation.gotoAndPlay(1);			_child.shoeAnimation.shoe.gotoAndPlay(1);			_child.shoeAnimation.shoe.gotoAndPlay(1);			_child.pagesAnimation.gotoAndPlay(1);			TweenLite.to(bg_main.bg_green, 1,{alpha:0});			//TweenLite.to(_child.pagesAnimation, .5,{alpha:1,onComplete:animateShoe3,delay:2});			TweenLite.to(timerMC, 0,{alpha:1,onComplete:animateShoe3,delay:2.5});		}				private function animateShoe3():void {				var myColor:Color  = new Color();				var myColor2:Color  = new Color();  				myColor.setTint(0xFFFA3A, .75);  				myColor2.setTint(0xFFFA3A, .75); 				//_child.pagesAnimation.transform.colorTransform = myColor;				//_child.shoeAnimation.shoe.shoeLightBeams.transform.colorTransform = myColor2;			TweenLite.to(_child.pagesAnimation, .5,{tint:0xFFFA3A,ease:Cubic.easeInOut});			//_child.pagesAnimation.alpha=1;			_child.shoeAnimation.shoe.shoes.gotoAndStop(3);						_child.shoeAnimation.gotoAndPlay(1);			_child.shoeAnimation.gotoAndPlay(1);			_child.shoeAnimation.shoe.gotoAndPlay(1);			_child.shoeAnimation.shoe.gotoAndPlay(1);			_child.pagesAnimation.gotoAndPlay(1);			TweenLite.to(bg_main.bg_blue, 1,{alpha:0});			//TweenLite.to(_child.pagesAnimation, 1,{alpha:0,onComplete:copyAnimationIn,delay:1.5});			TweenLite.to(timerMC, 0,{alpha:0,onComplete:copyAnimationIn,ease:Cubic.easeInOut,delay:1.75});		}				private function copyAnimationIn():void {				var myBlur:BlurFilter = new BlurFilter();				myBlur.quality = 3;				myBlur.blurX = 100;				//myBlur.blurY = 10;				_child.copy1.filters = [myBlur];				_child.copy2.filters = [myBlur];				_child.copy3.filters = [myBlur];					TweenLite.to(_child.pagesAnimation, 1,{alpha:0,ease:Cubic.easeInOut,delay:0});			TweenLite.to(_child.copy1,.3,{x:0,delay:0,blurFilter:{blurY:0,blurX:0},alpha:1,ease:Cubic.easeOut});			TweenLite.to(_child.copy2,.3,{x:0,delay:.1,blurFilter:{blurY:0,blurX:0},alpha:1,ease:Cubic.easeOut});			TweenLite.to(_child.copy3,.3,{x:0,delay:.2,blurFilter:{blurY:0,blurX:0},alpha:1,ease:Cubic.easeOut});			TweenLite.delayedCall(2, copyAnimationOut);			TweenLite.to(bg_main.bg_yellow, 1,{alpha:0});			TweenLite.to(bg_main.bg_green, 1,{alpha:1});		}				private function copyAnimationOut():void {			TweenLite.to(_child.copy1,.2,{x:-300,delay:0,blurFilter:{blurY:0,blurX:100},alpha:0,ease:Cubic.easeIn});			TweenLite.to(_child.copy2,.2,{x:-300,delay:.15,blurFilter:{blurY:0,blurX:100},alpha:0,ease:Cubic.easeIn});			TweenLite.to(_child.copy3,.2,{x:-300,delay:.3,blurFilter:{blurY:0,blurX:100},alpha:0,ease:Cubic.easeIn});			TweenLite.delayedCall(.75, showcaseShoes);					}				private function showcaseShoes():void {				var myBlur:BlurFilter = new BlurFilter();				myBlur.quality = 3;				myBlur.blurX = 100;				//myBlur.blurY = 10;				_child.copy4.filters = [myBlur];				//_child.cta.filters = [myBlur];			_child.shoe1.reflection1.alpha=1;			_child.shoe2.reflection2.alpha=1;			_child.shoe3.reflection3.alpha=1;			//_child.shoe1.reflection1.rotation=0;			//_child.shoe2.reflection2.rotation=0;			//_child.shoe3.reflection3..rotation=0;						TweenLite.to(_child.shoe3,.5,{x:50,delay:0,ease:Cubic.easeOut});			TweenLite.to(_child.shoe2,.5,{x:130,delay:.2,ease:Cubic.easeOut});			TweenLite.to(_child.shoe1,.5,{x:210,delay:.4,ease:Cubic.easeOut});			TweenLite.delayedCall(.1, _child.shoe3.gotoAndPlay, [1], false);			TweenLite.delayedCall(.25, _child.shoe2.gotoAndPlay, [1], false);			TweenLite.delayedCall(.4, _child.shoe1.gotoAndPlay, [1], false);			TweenLite.delayedCall(2, endFrameResolve);			TweenLite.to(_child.copy4,.4,{x:0,delay:.8,blurFilter:{blurY:0,blurX:0},alpha:1,ease:Cubic.easeOut});		}				private function endFrameResolve():void {							_child.shoe4.x=120;			_child.shoe4.y=20;			_child.shoe4.alpha=0;			TweenLite.to(bg_main.bg_green, 1,{alpha:1});			TweenLite.to(_child.shoe3,.5,{alpha:0,x:120,y:20,scaleX:.8,scaleY:.8,delay:.4,ease:Cubic.easeOut});			TweenLite.to(_child.shoe2,.5,{alpha:0,x:120,y:20,scaleX:.8,scaleY:.8,delay:.4,ease:Cubic.easeOut});			TweenLite.to(_child.shoe1,.5,{x:120,y:20,scaleX:.8,scaleY:.8,onComplete:interactiveShoe,delay:.4,ease:Cubic.easeOut});			TweenLite.to(_child.shoe1.reflection1,.5,{alpha:0,delay:.4,ease:Cubic.easeOut});						//TweenLite.to(_child.copy4,.4,{x:0,delay:.8,blurFilter:{blurY:0,blurX:0},alpha:1,ease:Cubic.easeOut});			TweenLite.to(_child.cta,.4,{x:150,delay:1,blurFilter:{blurY:0,blurX:0},alpha:1,ease:Cubic.easeOut});						_child.colorSwatches.x=192;			_child.colorSwatches.y=102;			TweenLite.to(_child.colorSwatches,1,{alpha:1,delay:1.5,ease:Cubic.easeOut});						_child.btn_expand.x=172;			_child.btn_expand.y=102;			TweenLite.to(_child.btn_expand,1,{alpha:1,delay:1.5,ease:Cubic.easeOut});			_child.cta.addEventListener(MouseEvent.MOUSE_OVER, onCTARollover);			_child.cta.addEventListener(MouseEvent.MOUSE_OUT, onCTARollout);			_child.cta.addEventListener(MouseEvent.CLICK, onClick);			_child.cta.buttonMode = true;									_child.colorSwatches.color1.addEventListener(MouseEvent.CLICK, onClickColorSwatch1);			_child.colorSwatches.color1.addEventListener(MouseEvent.MOUSE_OVER, mouseOverColorSwatch1);			_child.colorSwatches.color1.addEventListener(MouseEvent.MOUSE_OUT, mouseOutColorSwatch1);			_child.colorSwatches.color2.addEventListener(MouseEvent.CLICK, onClickColorSwatch2);			_child.colorSwatches.color2.addEventListener(MouseEvent.MOUSE_OVER, mouseOverColorSwatch2);			_child.colorSwatches.color2.addEventListener(MouseEvent.MOUSE_OUT, mouseOutColorSwatch2);			_child.colorSwatches.color3.addEventListener(MouseEvent.CLICK, onClickColorSwatch3);			_child.colorSwatches.color3.addEventListener(MouseEvent.MOUSE_OVER, mouseOverColorSwatch3);			_child.colorSwatches.color3.addEventListener(MouseEvent.MOUSE_OUT, mouseOutColorSwatch3);			_child.colorSwatches.color4.addEventListener(MouseEvent.CLICK, onClickColorSwatch4);			_child.colorSwatches.color4.addEventListener(MouseEvent.MOUSE_OVER, mouseOverColorSwatch4);			_child.colorSwatches.color4.addEventListener(MouseEvent.MOUSE_OUT, mouseOutColorSwatch4);			_child.colorSwatches.color1.buttonMode = true;			_child.colorSwatches.color2.buttonMode = true;			_child.colorSwatches.color3.buttonMode = true;			_child.colorSwatches.color4.buttonMode = true;					}				private function onClickColorSwatch1 (e:MouseEvent):void{				trace('click');		}		private function mouseOverColorSwatch1 (e:MouseEvent):void{				TweenLite.to(_child.colorSwatches.white1,.1,{alpha:1,ease:Cubic.easeOut});				//_child.shoe1.shoes.airbag.transform.colorTransform = myShoeColor1;				//TweenLite.to(_child.shoe1.shoes.airbag,.2,{tint:0xd8d84a,ease:Cubic.easeInOut});				//TweenLite.to(_child.shoe1.shoeLightBeams,.2,{tint:0xffffff,ease:Cubic.easeInOut});								TweenLite.to(_child.shoe1,.2,{alpha:1,ease:Cubic.easeInOut});				TweenLite.to(_child.shoe2,.2,{alpha:0,ease:Cubic.easeInOut});				TweenLite.to(_child.shoe3,.2,{alpha:0,ease:Cubic.easeInOut});				TweenLite.to(_child.shoe4,.2,{alpha:0,ease:Cubic.easeInOut});								TweenLite.to(bg_main.bg_green,.2,{alpha:1,ease:Cubic.easeInOut});				TweenLite.to(bg_main.bg_blue,.2,{alpha:0,ease:Cubic.easeInOut});				TweenLite.to(bg_main.bg_yellow,.2,{alpha:0,ease:Cubic.easeInOut});				TweenLite.to(bg_main.bg_red,.2,{alpha:0,ease:Cubic.easeInOut});								_child.shoe1.gotoAndPlay(2);		}		private function mouseOutColorSwatch1 (e:MouseEvent):void{								TweenLite.to(_child.colorSwatches.white1,.1,{alpha:0,ease:Cubic.easeOut});				/*				TweenLite.to(_child.shoe1.shoes.green,.2,{alpha:1,ease:Cubic.easeInOut});				TweenLite.to(_child.shoe1.shoes.black,.2,{alpha:0,ease:Cubic.easeInOut});				TweenLite.to(_child.shoe1.shoes.blue,.2,{alpha:0,ease:Cubic.easeInOut});				TweenLite.to(_child.shoe1.shoes.red,.2,{alpha:0,ease:Cubic.easeInOut});				*/				//TweenLite.to(_child.shoe1.shoeLightBeams,.2,{tint:0x184273,ease:Cubic.easeInOut});						}				private function onClickColorSwatch2 (e:MouseEvent):void{				trace('click');		}		private function mouseOverColorSwatch2 (e:MouseEvent):void{				TweenLite.to(_child.colorSwatches.white2,.1,{alpha:1,ease:Cubic.easeOut});				//_child.shoe1.shoes.airbag.transform.colorTransform = myShoeColor2;				//TweenLite.to(_child.shoe1.shoes.airbag,.2,{tint:0x184273,ease:Cubic.easeInOut});				//TweenLite.to(_child.shoe1.shoeLightBeams,.2,{tint:0x184273,ease:Cubic.easeInOut});				TweenLite.to(_child.shoe1,.2,{alpha:0,ease:Cubic.easeInOut});				TweenLite.to(_child.shoe2,.2,{alpha:1,ease:Cubic.easeInOut});				TweenLite.to(_child.shoe3,.2,{alpha:0,ease:Cubic.easeInOut});				TweenLite.to(_child.shoe4,.2,{alpha:0,ease:Cubic.easeInOut});								TweenLite.to(bg_main.bg_green,.2,{alpha:0,ease:Cubic.easeInOut});				TweenLite.to(bg_main.bg_blue,.2,{alpha:1,ease:Cubic.easeInOut});				TweenLite.to(bg_main.bg_yellow,.2,{alpha:0,ease:Cubic.easeInOut});				TweenLite.to(bg_main.bg_red,.2,{alpha:0,ease:Cubic.easeInOut});								_child.shoe2.gotoAndPlay(2);						}		private function mouseOutColorSwatch2 (e:MouseEvent):void{						TweenLite.to(_child.colorSwatches.white2,.1,{alpha:0,ease:Cubic.easeOut});						}				private function onClickColorSwatch3 (e:MouseEvent):void{				trace('click');		}		private function mouseOverColorSwatch3 (e:MouseEvent):void{				TweenLite.to(_child.colorSwatches.white3,.1,{alpha:1,ease:Cubic.easeOut});				//_child.shoe1.shoes.airbag.transform.colorTransform = myShoeColor3;				//TweenLite.to(_child.shoe1.shoes.airbag,.2,{tint:0x020202,ease:Cubic.easeInOut});				//TweenLite.to(_child.shoe1.shoeLightBeams,.2,{tint:0x020202,ease:Cubic.easeInOut});								TweenLite.to(_child.shoe1,.2,{alpha:0,ease:Cubic.easeInOut});				TweenLite.to(_child.shoe2,.2,{alpha:0,ease:Cubic.easeInOut});				TweenLite.to(_child.shoe3,.2,{alpha:1,ease:Cubic.easeInOut});				TweenLite.to(_child.shoe4,.2,{alpha:0,ease:Cubic.easeInOut});								TweenLite.to(bg_main.bg_green,.2,{alpha:0,ease:Cubic.easeInOut});				TweenLite.to(bg_main.bg_blue,.2,{alpha:0,ease:Cubic.easeInOut});				TweenLite.to(bg_main.bg_yellow,.2,{alpha:1,ease:Cubic.easeInOut});				TweenLite.to(bg_main.bg_red,.2,{alpha:0,ease:Cubic.easeInOut});								_child.shoe3.gotoAndPlay(2);		}		private function mouseOutColorSwatch3 (e:MouseEvent):void{						TweenLite.to(_child.colorSwatches.white3,.1,{alpha:0,ease:Cubic.easeOut});						}				private function onClickColorSwatch4 (e:MouseEvent):void{				trace('click');		}		private function mouseOverColorSwatch4 (e:MouseEvent):void{				TweenLite.to(_child.colorSwatches.white4,.1,{alpha:1,ease:Cubic.easeOut});				//_child.shoe1.shoes.airbag.transform.colorTransform = myShoeColor4;				//TweenLite.to(_child.shoe1.shoes.airbag,.2,{tint:0xbd2217,ease:Cubic.easeInOut});				//TweenLite.to(_child.shoe1.shoeLightBeams,.2,{tint:0xbd2217,ease:Cubic.easeInOut});								TweenLite.to(_child.shoe1,.2,{alpha:0,ease:Cubic.easeInOut});				TweenLite.to(_child.shoe2,.2,{alpha:0,ease:Cubic.easeInOut});				TweenLite.to(_child.shoe3,.2,{alpha:0,ease:Cubic.easeInOut});				TweenLite.to(_child.shoe4,.2,{alpha:1,ease:Cubic.easeInOut});								TweenLite.to(bg_main.bg_green,.2,{alpha:0,ease:Cubic.easeInOut});				TweenLite.to(bg_main.bg_blue,.2,{alpha:0,ease:Cubic.easeInOut});				TweenLite.to(bg_main.bg_yellow,.2,{alpha:0,ease:Cubic.easeInOut});				TweenLite.to(bg_main.bg_red,.2,{alpha:1,ease:Cubic.easeInOut});								_child.shoe4.gotoAndPlay(2);		}		private function mouseOutColorSwatch4 (e:MouseEvent):void{						TweenLite.to(_child.colorSwatches.white4,.1,{alpha:0,ease:Cubic.easeOut});						}				private function onCTARollover (e:MouseEvent):void{				_child.cta.play();		}		private function onCTARollout (e:MouseEvent):void{				_child.cta.gotoAndStop(1);		}					private function interactiveShoe():void {					}		public function onClick(event:Event)		{			//onReplayTimerEnd();			trace("click");			if (clickTag != "")			{				var req:URLRequest = new URLRequest(clickTag);				if (! ExternalInterface.available)				{					navigateToURL(req, "_blank");				}				else				{					var strUserAgent:String =					          String(ExternalInterface.call(					"function() {return navigator.userAgent;}"					)).toLowerCase();					if (strUserAgent.indexOf("firefox") != -1)					{						ExternalInterface.call( "window.open", req.url, "_blank" );					}					else					{						if ( strUserAgent.indexOf("msie") != -1 &&						            uint(strUserAgent.substr(strUserAgent.indexOf("msie") + 5, 3)) >= 7 )						{							ExternalInterface.call("window.open", req.url, "_blank");						}						else						{							navigateToURL(req, "_blank");						}					}				}			}		}	}}